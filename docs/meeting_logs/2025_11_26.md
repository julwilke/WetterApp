# 26.11.2025 (Mittwoch)
## Ungefähre Aufteilung der Themen:
- Tugba - API Recherche und Vorschläge der verschiedenen Wetterdienste, klarstellen der Vor- / Nachteile
- Adham - API Implementation und Auftrennen der Funktionen, Schnittstelle zur Datenspeicherung mit Julian und direkt an WebApp
- Nick - WebDashboard-Framework, Schnittstelle zu den Daten, Visualisierung
- Julian - Datenspeicherung & -aufbereitung, Backend (Verlinkung der Module)), Virtuelle Python Umgebung / Installationsbedingungen / Debug-Console im Hintergrund
---
### Tugba - API-Recherche: 
*Recherche und Vergleich der verschiedenen API-Anbieter/Wetterdienste*

**Auswahl der Dienste**

- OpenWeatherMap    https://openweathermap.org/
- Meteo-Stat        https://meteostat.net/de/
- Open-Meteo        https://open-meteo.com/ (ChatGPT hat den besonders herausgestellt)
- Weatherbit        https://www.weatherbit.io/
- Climacell         https://publicapis.io/clima-cell-micro-weather-api (heißt wohl mittlerweile https://www.tomorrow.io/)
- PirateWeather     https://pirateweather.net/en/latest/
        
**Wichtigste Fragen**
- **API**: Registrierung / Kosten? / Umfang pro Kosten,Call / Wieviele Calls pro Zeitbasis?
- **Umfang**: Welche Daten sind enthalten?
    - Temperatur, Feuchte, Wind, Regen, UV-Index, Bewölkung, Luftdruck, Pollenflug/Allergiewerte
- **Format**: 
    - Wie kriege ich die Daten? (JSON, CSV, XML, ...)
    - technische Details (siehe auch bei Adham): HTTP-Methoden (GET/POST/, .../ URL)
- **Zukünftige Daten (Forecast)**
    - Umfang: 3, 5, 7, 14 Tage?
    - zeitliche Auflösung: minütlich, stündlich? -> morgen Punkt 14 Uhr oder Morgen 14:36:24h?
    - Limits: Wie oft und wie weit in die Zukunft kann ich schauen?
- **Historische Daten**: 
    - Umfang, Zeitraum, Limits
- **Geografie:**
    - Stadtname (Köln, Cologne, Colonia?), Postleitzahl, Maps-Koordinaten möglich?
    - Welche Länder werden unterstützt?
    - Zeitbasis der Daten: Minütlich / Stündlich / Täglich /... ?
- **Besonderheiten der APIs**
    - Was können bestimmte APIs, die sie total herausstellen und von anderen abheben?
    - z.B. sehr genaue Live-Werte / sehr viele Calls / sehr gute Aussagen zu Luftqualität (Pollen, Feuchte,...)
- **Gefahren**
    - was ist mit kostenpflichtigen APIs? Die kosten oft nur z.B. 0.00014€ / Call, aber was wenn meine While-Schleife einen Fehler hat und mal eben 193283 Anfragen stellt ;-) 
    - Lizenzen / Legal-Topics / Veröffentlichung und Speicherung der Daten der Anbieter (siehe auch "Organisatorisches")
- **Sonstiges/Organisatorisch:**
    - Abstimmung mit den Aufgaben von Adham, um zu schauen, wo Schnittstellen sind und was du rausfindest, was für Adham interessant sein könnte

**Ziel**:
- **Auswahl von 2-3 APIs**
- Eine API für gute, umfangreiche und klare Live-Daten die uns nicht mit API-Call-Limits in die Quere kommen
- weitere APIs nur für Besonderheiten, z.B. sehr umfangreiche Historische Daten oder sehr guter Vorhersagen (Forecasts)
---
---
### Adham:
*Recherche und Verbesserung der API Abfrage* (in Verbindung mit den Erkenntnissen von Tugba)
**Abruf der Daten:**
    - Format: JSON / CSV / XML / STRING / ...
    - Anfrage via: REST-API, HTTP-Request, URL-Parameteer, POST/GET
    - vielleicht eine kleine .md / Textdatei die die API beschreibt die verwendet wird?- Statuscodes / Fehler der HTTP Anfrage -> z.b. 200 = hat geklappt / 404 = Fehler, ...
    - TimeOut falls Daten nicht kommen, keine Endlose Anfrage (5-15 Sekunden?)

**Vergleichstest** nach Auswahl der APIs (Nach Tugba's Recherche):
    - 3 APIs, gleiche Anfrage --> Wie unterscheiden sich die Ergebnisse?

**klare Trennung der API** von der Datenverarbeitung
    - die API **holt** die Daten, keine Verarbeitung, keine Veränderung/Formatierung, keine Visualisierung
        - das passiert später z.B. in '*data_verarbeitung.py*', '*data_analysis.py*', '*visualisation.py*' (ggf. mit / von Nick)
    - API ist somit reiner "Datenlieferant"

**API-Key "unsichtbar" machen**
    - Privater Key darf nicht im GitHub landen, noch besser nichtmal im "*api.py*" vorkommen
    - da eine Variable nehmen, z.B. "API_KEY = MY_API_KEY", diesen dann in einer anderen Datei / Config-Datei speichern, ggf. in Verbindung mit virtueller Python Umgebung des Benutzers (siehe Julian)
        - Nutzung von *.env* Dateien (siehe "dotenv" / "load_dotenv")

**HTTP-Statuscodes & Fehlerbehandlung**
    - die wichtigsten raussuchen und dann verarbeiten, wir hatten ja schon "200 = OK" (siehe https://de.wikipedia.org/wiki/HTTP-Statuscode)
    - Fehler führen nicht einfach zum Programmabsturz oder error-Einträgen in den Dictionaries/Daten, sondern werden abgefangen (try/except wo es Sinn macht, oder z.B. "raise ApiError("Stadt nicht gefunden") ausgeben)

**Log-Dateien erstellen?**
    - Web-Anfragen hinterlassen oft Logs, da gibt es z.B. das Logging-Modul ("import logging")

**Temporäre / Cache - Ablage der aktuell abgerufenen Daten** (In Zusammenarbeit mit Julian?)
    - z.B. unter **/data/cache** erstmal die volle '2025-11-26-14-07_paris.json' abspeichern
        - damit baut man sich nicht nur historische Daten auf (ohne diese historischen abrufen zu müssen) sondern verhindert auch unnötigen Verbrauch der API-Calls

**Ausblick / Zukunft**
    - Klasse für den API-Client erstellen, der alle notwendigen Funktionen hat
    - ggf. eine "BaseAPIClient" Klasse erstellen, die alle APIs schafft und die Unterschiede über die übergebenen Parameter abgreifen kann, dann muss nicht für jede API ein extra Abruf geschrieben werden

---
---
### Nick
*WebDashboard erstellen*

**Grundlegendes Konzept/Framework für die WebApp erstellen**
- Kern: Übersichtlich, Benutzerfreundlich, Erweiterbar
- so wenig Datenverarbeitung / -transformation wie 
    - UserInterface ist nur UserInterface ! => Keine großen Logiken/Operationen
    - die Daten müssen möglichst sauber und fertig (in Absprache mit Nick) in den Dateien wie z.B. api_client.py / data_verarbeitung.py / data_analysis.py / (ggf. visualization.py) aufbereitet werden

**Recherche und Auswahl eines Frameworks / technischer Module**
- z.B. Streamlit, Flask , ...

**1) Pflichtinhalte**
- Eingabefeld für eine Stadt (Format mit API / Ergebnisse Tugba absprechen)
- Anzeige der Live-Daten von *jetzt*

**2) Erweiterung**
- Vorhersage/Forecast Anzeige
- Historischen Vergleich

**3) Optional / Nice-To-Have**
- Vergleich von zwei Städten
- Kartenansicht (z.B. mit *Folium*)

**Layout**
- Startseite / Dashboard
- Forecast
- Historische Daten
- (KI-Inhalte)
- (Karten)
- (bei Streamlit gibt es wohl "Multipage Apps")
- Auch wenn die Inhalte noch fehlen, können angedachte Erweiterungen bereits vorbereitet werden (ggf. ausgegraut, mit Grafik überblendet "kommt nocht" o.ä.)

**Fehlerbehandlung**
- was ist mit Leeren Eingaben
- Fehler aus API/Adham's Teil visuell darstellen für den Nutzer ("Stadt wurde nicht gefunden!")

---
---
### Julian

**Datenspeicherung / Datenbanken / Datenpersistenz**
- vom temporären Cache zu persistenten Daten
- eigene historische Daten loggen, auch als Datengrundlage für Tests, API-Ausfall etc. 
- API-Calls damit minimieren
- Datengrundlage für Tests schaffen, damit man dort keine API-Requests braucht
- Namen/Format etc. für die Datenspeicherung bestimmten
- CSV / XML / JSON / SQLite /...

**Debug-Console**
- Während die WebApp für den Benutzer läuft, gibt die Konsole Auskunft über das was passier und ggf. nicht funktioniert

**Aufbau und Unterstützung im Backend**
- Schnittstellen zwischen Daten <> API <> WebApp
- Aufrufreihenfolge / -priorität / Verlinkung der einzelnen python-Module (in Absprache mit allen anderen)
- 

**Virtuelle Python Umgebungen**
- wie arbeitet und funktioniert die /.venv
- ggf. /.env.example
- configs
- Dokumentation der Installation und der Verwendung der App im Repository
- Absicherung im .gitignore 
- requirements.txt pflegen

---
---
# Sonstige Ideen / Notizen
- Test Cases
    - Daten außerhalb der Rahmen (2385 °C, 27:34 Uhr, ...)
    - wie mit fehlenden Daten umgehen? Besonders in Graphen/Trends (Interpolieren, Auslassen, Füllen?)
    - unbekannte Stadt (KI-Check?, Fehlermeldung?, Geben uns die APIs dafür schon Möglichkeiten?)

## Organisatorisches
- Legal-Topics
    - Lizenzen in GitHub wenn es ein privates Uni-Projekt ist? 
    - API Beschränkungen? Was darf ich veröffentlichen, persistent speichern, ...
